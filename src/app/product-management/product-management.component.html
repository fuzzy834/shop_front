<form action="#" autocomplete="off">
  <div class="form-group">
    <app-translated-input [obj]="product" [title]="'Назва продукту'" [name]="'name'" [textarea]="false">
    </app-translated-input>
  </div>
  <div class="form-group">
    <app-translated-input [obj]="product" [title]="'Опис продукту'" [name]="'description'" [textarea]="true">
    </app-translated-input>
  </div>
  <div class="form-group">
    <div class="input-group">
      <div class="input-group-prepend">
        <span class="input-group-text">Знижка</span>
      </div>
      <input id="product-discount" class="form-control" type="number" [(ngModel)]="product.discount"
             name="discount">
      <div class="input-group-append">
        <span class="input-group-text">%</span>
      </div>
    </div>
  </div>
  <div class="form-group">
    <div class="input-group">
      <div class="input-group-prepend">
        <span class="input-group-text">Роздрібна ціна</span>
      </div>
      <input id="product-retail-price" class="form-control" type="number" [(ngModel)]="product.retailPrice"
             name="retailPrice">
    </div>
  </div>
  <div class="form-group">
    <div class="input-group">
      <div class="input-group-prepend">
        <span class="input-group-text">Оптова ціна</span>
      </div>
      <input id="product-bulk-price" class="form-control" type="number" [(ngModel)]="product.bulkPrice"
             name="bulkPrice">
    </div>
  </div>
  <div class="form-group">
    <div class="input-group">
      <div class="input-group-prepend">
        <span class="input-group-text">Валюта</span>
      </div>
      <select id="product-currency" class="custom-select" [(ngModel)]="product.currency" name="currency">
        <option></option>
        <option>UAH</option>
        <option>USD</option>
        <option>EUR</option>
      </select>
    </div>
  </div>
  <div class="form-group">
    <div class="input-group">
      <div class="input-group-prepend">
        <span class="input-group-text">Категорія</span>
      </div>
      <app-categories-selector [selectedId]="onCategoryPresent()"
                               (selection)="assignCategory($event)"></app-categories-selector>
    </div>
  </div>
  <div class="form-group">
    <button type="button"
            [appModal]="productAttributeModal"
            class="btn btn-outline-dark"
            (click)="addAttribute(attributes)">
      Додати атрибут
    </button>
  </div>
  <div class="modal fade" id="product-attribute-modal" tabindex="-1" #productAttributeModal>
    <div class="modal-dialog modal-lg modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Додати атрибут</h5>
          <button type="button" class="close" [appModal]="productAttributeModal">
            <span>&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <template #attributeContainer></template>
        </div>
        <div class="modal-footer">
          <div class="modal-footer">
            <button [disabled]="!productAttributeSelected" (click)="addProductAttribute()" type="button"
                    [appModal]="productAttributeModal"
                    class="btn btn-outline-dark">Додати
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <ul *ngIf="product.attributes.length > 0"
      class="list-group list-group-flush">
    <li *ngFor="let attribute of product.attributes" class="list-group-item">
      {{attribute.name}}&nbsp;{{attribute.value}}
      <div class="btn-group pull-right">
        <button (click)="deleteAttribute(attribute.id)" class="btn btn-sm btn-outline-dark">
          <i class="fa fa-trash"></i>
        </button>
      </div>
    </li>
  </ul>
  <br *ngIf="product.attributes.length > 0">
  <div class="form-group">
    <input title="" hidden id="product-image" type="file" (change)="setFiles($event)" accept=".jpg, .jpeg, .png"
           multiple #fileInput>
    <button type="button" class="btn btn-outline-dark" (click)="fileInput.click()">Завантажити зображення</button>
  </div>
  <div class="form-group">
    <ul class="list-group list-group-flush" #imageContainer [hidden]="imageContainer.children.length === 0">
      <li class="list-group-item list-group-item-action d-flex justify-content-between align-items-center"
          *ngFor="let imageToUpload of imagesToUpload; let i = index" data-index="i">
        <img width="50" height="50" [alt]="imageToUpload.name" [title]="imageToUpload.name"
             [src]="imageToUpload.url"/>
        <span class="badge badge-dark badge-pill">{{imageToUpload.type}}</span>
        <span class="badge badge-secondary badge-pill">{{imageToUpload.size}}</span>
        <span class="btn btn-outline-dark border-0"
              (click)="removeImage(i)"><i class="fa fa-trash"></i></span>
      </li>
    </ul>
  </div>
  <div class="form-group">
    <div class="btn-group">
      <button class="btn btn-outline-dark" type="button" (click)="submitProduct()">Зберегти</button>
      <button class="btn btn-outline-dark" type="reset">Очистити</button>
      <button class="btn btn-outline-dark" type="button">Скасувати</button>
    </div>
  </div>
</form>

